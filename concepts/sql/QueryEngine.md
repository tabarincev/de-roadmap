## List of content
- [Что такое Query Engine ?]()
  - [Основные задачи]()
- [Логический план]()
  - [Компоненты]()
    - []()
  - [Особенности]()
- [Физический план]()
- [Планирование запроса]()
- [Оптимизация запроса]()
  - [Rule-Based]()
  - [Projection Push-Down]()
  - [Predicate Push-Down]()
  - [Eliminate Common Subexpressions]()
  - [Перевод коррелирующих подзапросов в JOIN]()
  - [Cost-Based]()
- [Выполнение запроса]()
- [Параллельное выполнение запроса]()
  - [Комбинирование результата]()
  - [Партиционирование]()
  - [Ключи партиционирования]()
  - [Параллельные JOIN]()
- [Распределенное выполнение запроса]()
  - [Параллельные операторы]()
  - [Аггрегации]()
  - [JOIN]()
  - [План запроса]()
  - [Сериализация плана запроса]()
  - [Сериализация данных]()
  - [Оптимизации]()
    - [Память]()
    - [CPU]()
    - [GPU]()
    - [Диск]()
    - [Сеть]()
    - [Хранилище]()
    - [Размер данных]()
    - [Затраты]()

# Что такое Query Engine ?
Программный компонент или система, предназначенная для выполнения запросов к данным. Он обрабатывает запросы, преобразует их в операции, которые можно выполнить над базой данных, хранилищем данных или другими источниками информации, и возвращает результаты.

### Основные задачи
1.	**`Парсинг`**: анализирует текст запроса, проверяет его синтаксическую корректность и преобразует в понятный системе формат.
2.	**`Оптимизация`**: определяет наиболее эффективный способ выполнения запроса (например, выбирает подходящие индексы, минимизирует количество операций чтения/записи).
3.	**`Выполнение`**: выполняет запрос, получая данные из источников.
4.	**`Форматирование`**: возвращает результаты в удобном для пользователя виде.

# Логический план
**`Логический план`** - структура, описывающая последовательность шагов, необходимых для выполнения запроса в `Query Engine` на уровне логики, без учета физической реализации. Логический план фокусируется на том, что должно быть сделано, а не на том, как это будет выполнено.

Логический план используется для анализа и оптимизации запросов перед тем, как они будут преобразованы в физический план для выполнения.

## Компоненты
- ### Выбор источников данных (Data Scan)
  - Определение таблиц, коллекций, индексов или других источников данных, которые участвуют в запросе.
  - Указание на атрибуты (столбцы) данных, которые должны быть извлечены.
- ### Фильтрация данных (Filter)
  - Применение условий фильтрации (например, `WHERE`, `HAVING`).
  - Устранение ненужных данных на раннем этапе обработки.
- ###	Проекции (Projection)
  - Выбор конкретных полей (столбцов), которые должны быть возвращены или обработаны.
  - Включение вычисляемых полей (например, `SUM(price)`, `COUNT(*)`).
- ### Объединение данных (Join)
  - Соединение данных из нескольких источников с использованием условий соединения (`INNER JOIN`, `LEFT JOIN`, `CROSS JOIN`).
  - Определение логики связи между таблицами (например, на основе первичного и внешнего ключей).
- ### Агрегация (Aggregation)
  - Применение функций агрегирования (например, `SUM`, `AVG`, `MAX`, `MIN`).
  - Группировка данных по ключам (`GROUP BY`).
- ### Упорядочение данных (Sorting)
  - Сортировка результата в указанном порядке (`ORDER BY`).
  - Учет нескольких ключей сортировки.
- ### Ограничение (Limit)
  - Указание количества строк, которые должны быть возвращены (`LIMIT` или `OFFSET`).
- ### Объединение результатов (Set Operations)
  - Операции над множествами: `UNION`, `INTERSECT`, `EXCEPT`.
	- Устранение дубликатов или сохранение их в объединенных данных.
- ### Логика дополнительных выражений
  - Выражения и условия, встроенные в запрос (например, подзапросы, выражения в `CASE`).
  - Работа с вложенными запросами.

# Физический план

## Планирование запроса

## Оптимизация запроса
### Rule-Based
### Projection Push-Down
### Predicate Push-Down
### Eliminate Common Subexpressions
### Перевод коррелирующих подзапросов в JOIN
### Cost-Based

## Выполнение запроса

## Параллельное выполнение запроса
### Комбинирование результата
### Партиционирование
### Ключи партиционирования
### Параллельные JOIN

## Распределенное выполнение запроса
### Параллельные операторы
### Аггрегации
### JOIN
### План запроса
### Сериализация плана запроса
### Сериализация данных
### Оптимизации
- Память
- CPU
- GPU
- Диск
- Сеть
- Хранилище
- Размер данных
- Затраты
